@{
    ViewData["Title"] = "Administrator Dashboard";
    ViewData["ActivePage"] = "Dashboard";
}

<div class="content-header">
    <div>
        <h1 class="page-title">Dashboard</h1>
        <p class="breadcrumb">Welcome back, Admin! Here's what's happening today.</p>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card blue">
        <div class="stat-icon">
            <i class="material-icons">event_note</i>
        </div>
        <div class="stat-content">
            <p class="stat-title">Total Appointments</p>
            <div class="stat-value">
                24
                <span class="change up">
                    <i class="material-icons">trending_up</i> 12%
                </span>
            </div>
            <p class="stat-extra">This month's appointments</p>
        </div>
    </div>

    <div class="stat-card green">
        <div class="stat-icon">
            <i class="material-icons">person_check</i>
        </div>
        <div class="stat-content">
            <p class="stat-title">Active Groomers</p>
            <div class="stat-value">
                2
                <span class="change up">
                    <i class="material-icons">trending_up</i> 2
                </span>
            </div>
            <p class="stat-extra">Available to work</p>
        </div>
    </div>

    <div class="stat-card yellow">
        <div class="stat-icon">
            <i class="material-icons">pending_actions</i>
        </div>
        <div class="stat-content">
            <p class="stat-title">Pending Appointments</p>
            <div class="stat-value">
                1
                <span class="change up">
                    <i class="material-icons">trending_up</i> 1
                </span>
            </div>
            <p class="stat-extra">Awaiting confirmation</p>
        </div>
    </div>

    <div class="stat-card red">
        <div class="stat-icon">
            <i class="material-icons">payments</i>
        </div>
        <div class="stat-content">
            <p class="stat-title">Total Revenue</p>
            <div class="stat-value">
                $35,078
                <span class="change down">
                    <i class="material-icons">trending_down</i> 27.4%
                </span>
            </div>
            <p class="stat-extra">Compared to last month</p>
        </div>
    </div>
</div>

<div class="chart-and-info-grid">
    <div class="chart-panel">
        <div class="panel-header">
            <div>
                <h3 class="panel-title">Appointment Trend</h3>
                <p class="panel-subtitle-small">Track your booking patterns</p>
            </div>
            <div class="chart-options">
                <button class="btn-chart-option" onclick="updateChart('month')">Month</button>
                <button class="btn-chart-option active" onclick="updateChart('week')">Week</button>
                <button class="btn-chart-option" onclick="updateChart('day')">Day</button>
            </div>
        </div>
        <canvas id="appointmentChart" style="max-height: 350px;"></canvas>
    </div>

    <div class="info-panel">
        <div class="loyalty-header">
            <i class="material-icons loyalty-icon">card_giftcard</i>
        </div>
        <h3 class="panel-title">Loyalty Points</h3>
        <p class="stat-value-large">7,650</p>
        <p class="panel-subtitle">Points Awarded This Week</p>
        <div class="loyalty-stats">
            <div class="loyalty-stat-item">
                <span class="loyalty-stat-label">Active Members</span>
                <span class="loyalty-stat-value">156</span>
            </div>
            <div class="loyalty-stat-item">
                <span class="loyalty-stat-label">Points Redeemed</span>
                <span class="loyalty-stat-value">2,340</span>
            </div>
        </div>
    </div>
</div>

<div class="calendar-section">
    <div class="calendar-container">
        <div class="calendar-header">
            <h2>Appointment Calendar</h2>
            <div class="calendar-nav">
                <button id="prevMonth" class="btn-nav">&laquo;</button>
                <span id="monthYear" class="month-year"></span>
                <button id="nextMonth" class="btn-nav">&raquo;</button>
            </div>
        </div>

        <div class="calendar-grid">
            <div class="calendar-day-header">Sun</div>
            <div class="calendar-day-header">Mon</div>
            <div class="calendar-day-header">Tue</div>
            <div class="calendar-day-header">Wed</div>
            <div class="calendar-day-header">Thu</div>
            <div class="calendar-day-header">Fri</div>
            <div class="calendar-day-header">Sat</div>

            <div id="calendar"></div>
        </div>
    </div>

    <div class="appointments-sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">
                <i class="material-icons">event</i>
                <span>Appointments</span>
            </div>
            <span id="selectedDate" class="selected-date-badge">Today</span>
        </div>

        <div id="appointmentsList">
            <p class="no-appointments">No appointments scheduled</p>
        </div>
    </div>
</div>



<script>
    // ========================================
    // DASHBOARD DATA (Page-Specific)
    // ========================================

    // Chart data
    window.dashboardChartData = {
        week: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            data: [12, 19, 15, 25, 22, 18, 20]
        },
        month: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            data: [65, 78, 82, 95]
        },
        day: {
            labels: ['9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM'],
            data: [2, 4, 3, 5, 4, 6, 3, 2, 1]
        }
    };

    // Appointment data
    const appointmentData = [
        {
            id: 1,
            date: new Date().toISOString().split('T')[0],
            time: "09:00",
            petName: "Buddy",
            groomerName: "Anna Lee",
            serviceType: "Full Groom",
            status: "confirmed"
        },
        {
            id: 2,
            date: new Date().toISOString().split('T')[0],
            time: "10:30",
            petName: "Whiskers",
            groomerName: "Mark Chen",
            serviceType: "Bath",
            status: "confirmed"
        },
        {
            id: 3,
            date: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            time: "14:00",
            petName: "Max",
            groomerName: "Anna Lee",
            serviceType: "Nail Trim",
            status: "pending"
        },
        {
            id: 4,
            date: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            time: "11:00",
            petName: "Luna",
            groomerName: "Mark Chen",
            serviceType: "Full Groom",
            status: "confirmed"
        }
    ];

    // ========================================
    // INITIALIZE DASHBOARD
    // ========================================
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize chart
        DashboardChart.init(window.dashboardChartData);

        // Initialize calendar
        DashboardCalendar.init(appointmentData);
    });
</script>