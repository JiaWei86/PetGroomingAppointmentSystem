@{
    ViewData["Title"] = "Forgot Password";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/Customer/css/auth.css" />
</head>
<body>
    <div class="auth-container">
        <div class="auth-box login-box">
            <div class="auth-header">
                <h1>Reset Password</h1>
                <p>Enter your details to reset your password</p>
            </div>

            @if (ViewData["Error"] != null)
            {
                <div class="alert alert-danger">@ViewData["Error"]</div>
            }

            @if (ViewData["Success"] != null)
            {
                <div class="alert alert-success">@ViewData["Success"]</div>
            }

            <form method="post">
                <!-- Step 1: Phone & Email Input -->
                <div class="form-group">
                    <label for="phoneNumber">Phone Number</label>
                    <input type="text" id="phoneNumber" name="phoneNumber" 
                           placeholder="Enter your phone number" 
                           value="@ViewData["Phone"]"
                           required />
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" 
                           placeholder="Enter your email" 
                           value="@ViewData["Email"]"
                           required />
                </div>

                <!-- Step 1: Send Code Button -->
                @if (ViewData["CodeSent"] == null || !(bool)ViewData["CodeSent"])
                {
                    <button type="submit" name="action" value="send" class="btn-submit">Send Verification Code</button>
                }

                <!-- Step 2: Verification Code Input (shown after code is sent) -->
                @if (ViewData["CodeSent"] != null && (bool)ViewData["CodeSent"])
                {
                    <div class="form-group" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd;">
                        <label for="verificationCode">Verification Code</label>
                        <p style="font-size: 12px; color: #666; margin-bottom: 10px;">
                            A 6-digit code has been sent to your email. Code expires in 10 minutes.
                        </p>
                        <input type="text" id="verificationCode" name="verificationCode" 
                               placeholder="Enter 6-digit code" 
                               maxlength="6"
                               inputmode="numeric"
                               required />
                    </div>

                    <button type="submit" name="action" value="verify" class="btn-submit">Verify Code</button>
                    
                    <button type="submit" name="action" value="send" class="btn-secondary" style="margin-top: 10px;">
                        Resend Code
                    </button>
                }

                <div class="auth-footer">
                    <p><a href="@Url.Action("Login", "Auth")">Back to Login</a></p>
                </div>
            </form>
        </div>
    </div>
</body>
</html>